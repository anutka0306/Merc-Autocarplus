document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("header"),t=document.getElementById("openMenu"),n=document.getElementById("closeMenu"),i=document.getElementById("menu"),o=document.body,a=document.querySelector(".repair-btn button"),r=document.querySelector(".repair-slider"),s=r?.querySelector(".swiper-wrapper"),d=document.querySelector(".services__btn button"),c=document.querySelector(".services__items"),l=document.querySelectorAll(".price__tab"),m=document.querySelectorAll("[data-tab-content]"),u=document.querySelector(".feedback-modal"),p=document.querySelector(".promotionSwiper .swiper-wrapper"),f=p?.innerHTML||"";let g=!1,h=!1,v=r?initRepairSwiper():null,y;function initRepairSwiper(){return new Swiper(".repair-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"}})}function initPromotionSwiper(){y&&y.destroy(!0,!0),y=new Swiper(".promotionSwiper",{slidesPerView:2,spaceBetween:16,centeredSlides:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{991:{slidesPerView:"auto",spaceBetween:30},768:{slidesPerView:2,spaceBetween:16},375:{slidesPerView:1,spaceBetween:16}}})}const w=()=>{if(!p)return;const e=Array.from(p.querySelectorAll(".promotion__item"));p.innerHTML="",e.forEach(e=>{const t=document.createElement("div");t.className="swiper-slide",t.appendChild(e.cloneNode(!0)),p.appendChild(t)})},x=()=>{p&&(p.innerHTML=f)};const handleResize=()=>{if(!p)return;window.innerWidth<=991?w():x(),initPromotionSwiper()};window.addEventListener("scroll",()=>{e&&e.classList.toggle("scrolled",window.scrollY>0)}),t?.addEventListener("click",()=>{i?.classList.add("open"),o.classList.add("shadow")}),n?.addEventListener("click",()=>{i?.classList.remove("open"),o.classList.remove("shadow")}),a?.addEventListener("click",()=>{if(!r)return;g=!g,g?(v?.destroy(!0,!0),r.classList.add("expanded"),a.textContent="Скрыть"):(v=initRepairSwiper(),r.classList.remove("expanded"),a.textContent="Показать все")}),d?.addEventListener("click",()=>{if(!c)return;h=!h,c.classList.toggle("service",h),d.textContent=h?"Скрыть":"Показать все"}),new Swiper(".aboutSwiper",{pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new Swiper(".sertSwiper",{slidesPerView:3,spaceBetween:16,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{991:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:2,spaceBetween:15},576:{slidesPerView:2,spaceBetween:10},400:{slidesPerView:2,spaceBetween:10},375:{slidesPerView:1,spaceBetween:10}}}),l.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.tab;l.forEach(e=>e.classList.remove("active")),e.classList.add("active"),m.forEach(e=>{e.style.display=e.dataset.tabContent===t?"flex":"none"})})}),l[0]?.click(),document.addEventListener("click",e=>{const t=e.target.closest(".open-form-btn");t&&(u?.classList.add("active"),o.classList.add("lock")),u&&e.target===u&&(u.classList.remove("active"),o.classList.remove("lock"))}),window.jQuery&&$(".phone").mask("+7(999) 999-99-99"),window.addEventListener("resize",handleResize),handleResize()});
